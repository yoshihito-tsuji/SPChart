# S-P表理論 技術リファレンス

## 概要

S-P表（Student-Problem表）は、佐藤隆博が1969年にNEC研究所で開発した日本発の教育測定手法です。テスト結果の二値データを視覚的・統計的に分析します。

## 基本構造

### データ行列

N人の生徒 × n個の問題からなる二値行列M：

```
        問題1  問題2  問題3  ...  問題n
生徒1     1      1      0          1
生徒2     1      0      1          0
生徒3     0      1      1          1
  :
生徒N     1      1      0          0
```

- 1: 正答
- 0: 誤答

### 並べ替え規則

1. **縦軸（生徒）**: 合計得点の高い順に上から下へ
2. **横軸（問題）**: 正答者数の多い順（易しい順）に左から右へ

## S曲線とP曲線

### S曲線（Student Curve）

各生徒について、左から正答数分のセルを数えた位置を結んだ階段状の折れ線。

- 得点分布の累積度数分布に対応
- 位置: 生徒の達成水準
- 形状: 達成度の分布

### P曲線（Problem Curve）

各問題について、上から正答者数分のセルを数えた位置を結んだ折れ線。

- 項目困難度の視覚的表現
- 位置: 問題の正答率
- 形状: 問題ごとの難易度

### ガットマン尺度

S曲線とP曲線が完全に一致する場合、完全なガットマン尺度（Guttman Scale）を形成。

- 「高得点者ほど難しい問題まで正答し、易しい問題は全員が正答する」
- 理想的パターン

## 注意係数（Caution Index）

### 生徒の注意係数（CS）

```
CS_i = (A - B) / (C - D × E)
```

**変数の定義:**

| 変数 | 定義 |
|------|------|
| A | S曲線より左側の誤答に対応する項目の正答者数の和 |
| B | S曲線より右側の正答に対応する項目の正答者数の和 |
| C | S曲線より左側の項目の正答者数の和 |
| D | 生徒iの合計得点 |
| E | 全項目の正答者数の平均 |

### 問題の注意係数（CP）

生徒と問題の役割を入れ替えて同様に定義。

### 判定基準

| 値 | 判定 | 意味 |
|----|------|------|
| < 0.5 | 正常 | 期待通りの回答パターン |
| 0.5 ≤ x < 0.75 | 要注意 | 回答パターンに異常あり |
| ≥ 0.75 | 特に注意 | 顕著な異常パターン |

### 注意係数が高い場合の解釈

**生徒（CS高）:**
- 易しい問題を間違え、難しい問題を正答
- 不注意、特定分野の苦手、当て推量の可能性

**問題（CP高）:**
- 高得点者が間違え、低得点者が正答
- 問題の不備、曖昧な表現、特殊知識が必要

## 差異係数（D*）

S曲線とP曲線に囲まれた面積を、ランダム反応時の期待値で除した比率。

```
D* = (S曲線とP曲線の間の面積) / (ランダム反応時の期待面積)
```

- D* = 0: 完全なガットマン尺度
- 値が大きい: テスト全体の反応パターンの一貫性が低い

## 実装時の注意点

### ゼロ除算対策

注意係数の分母が0になるケース：
- 全問正答の生徒
- 全問誤答の生徒
- 全員正答の問題
- 全員誤答の問題

→ 注意係数を「計算不可」または0として処理

### エッジケース

- 生徒が1人の場合
- 問題が1問の場合
- すべて同じ得点の生徒がいる場合

## 参考文献

1. 佐藤隆博 (1975)『S-P表の作成と解釈―授業分析・学習診断のために―』明治図書出版
2. Tatsuoka, K.K. (1984) "Caution indices based on item response theory" Psychometrika
3. 文部科学省 全国学力・学習状況調査 S-P表活用ガイド
